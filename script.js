const word = document.getElementById('word');
const text = document.getElementById('text');
const scoreEl = document.getElementById('score');
const timeEl = document.getElementById('time');
const endgameEl = document.getElementById('end-game-container');
const settingsBtn = document.getElementById('settings-btn');
const settings = document.getElementById('settings');
const settingsForm = document.getElementById('settings-form');
const difficultySelect = document.getElementById('difficulty');

// List of words for game
const words = [
  'sigh',
  'tense',
  'airplane',
  'ball',
  'pies',
  'juice',
  'warlike',
  'bad',
  'north',
  'dependent',
  'steer',
  'silver',
  'highfalutin',
  'superficial',
  'quince',
  'eight',
  'feeble',
  'admit',
  'drag',
  'loving',
  'ability',
  'able',
  'about',
  'above',
  'accept',
  'according',
  'account',
  'across',
  'act',
  'action',
  'activity',
  'actually',
  'add',
  'address',
  'administration',
  'admit',
  'adult',
  'affect',
  'after',
  'again',
  'against',
  'age',
  'agency',
  'agent',
  'ago',
  'agree',
  'agreement',
  'ahead',
  'air',
  'all',
  'allow',
  'almost',
  'alone',
  'along',
  'already',
  'also',
  'although',
  'always',
  'American',
  'among',
  'amount',
  'analysis',
  'and',
  'animal',
  'another',
  'answer',
  'any',
  'anyone',
  'anything',
  'appear',
  'apply',
  'approach',
  'area',
  'argue',
  'arm',
  'around',
  'arrive',
  'art',
  'article',
  'artist',
  'as',
  'ask',
  'assume',
  'at',
  'attack',
  'attention',
  'attorney',
  'audience',
  'author',
  'authority',
  'available',
  'avoid',
  'away',
  'baby',
  'back',
  'bad',
  'bag',
  'ball',
  'bank',
  'bar',
  'base',
  'be',
  'beat',
  'beautiful',
  'body',
  'book',
  'born',
  'both',
  'box',
  'boy',
  'break',
  'bring',
  'brother',
  'budget',
  'build',
  'building',
  'business',
  'but',
  'buy',
  'by',
  'call',
  'camera',
  'campaign',
  'can',
  'cancer',
  'certainly',
  'chair',
  'challenge',
  'chance',
  'change',
  'character',
  'commercial',
  'common',
  'community',
  'company',
  'compare',
  'computer',
  'concern',
  'condition',
  'conference',
  'Congress',
  'consider',
  'consumer',
  'cup',
  'current',
  'customer',
  'cut',
  'dark',
  'data',
  'daughter',
  'detail',
  'determine',
  'develop',
  'development',
  'die',
  'difference',
  'different',
  'difficult',
  'dinner',
  'direction',
  'drive',
  'drop',
  'drug',
  'during',
  'each',
  'early',
  'east',
  'easy',
  'eat',
  'economic',
  'economy',
  'edge',
  'education',
  'effect',
  'effort',
  'face',
  'fact',
  'factor',
  'fail',
  'fall',
  'family',
  'far',
  'fast',
  'father',
  'fear',
  'federal',
  'feel',
  'feeling',
  'few',
  'field',
  'fight',
  'fly',
  'focus',
  'follow',
  'food',
  'foot',
  'for',
  'force',
  'foreign',
  'forget',
  'form',
  'former',
  'forward',
  'four',
  'free',
  'friend',
  'from',
  'front',
  'goal',
  'good',
  'government',
  'great',
  'green',
  'ground',
  'group',
  'grow',
  'growth',
  'guess',
  'gun',
  'guy',
  'hair',
  'half',
  'hand',
  'hang',
  'happen',
  'happy',
  'hard',
  'have',
  'he',
  'head',
  'health',
  'hold',
  'home',
  'hope',
  'hospital',
  'hot',
  'hotel',
  'hour',
  'house',
  'how',
  'however',
  'huge',
  'human',
  'hundred',
  'husband',
  'I',
  'idea',
  'identify',
  'if',
  'image',
  'imagine',
  'impact',
  'important',
  'international',
  'interview',
  'into',
  'investment',
  'involve',
  'issue',
  'it',
  'item',
  'its',
  'itself',
  'job',
  'join',
  'just',
  'keep',
  'key',
  'kid',
  'kill',
  'kind',
  'kitchen',
  'know',
  'knowledge',
  'land',
  'language',
  'letter',
  'level',
  'lie',
  'life',
  'light',
  'like',
  'likely',
  'line',
  'list',
  'listen',
  'little',
  'live',
  'local',
  'long',
  'look',
  'lose',
  'loss',
  'lot',
  'love',
  'low',
  'machine',
  'magazine',
  'main',
  'maintain',
  'major',
  'majority',
  'make',
  'man',
  'manage',
  'management',
  'manager',
  'many',
  'market',
  'marriage',
  'material',
  'matter',
  'may',
  'maybe',
  'me',
  'much',
  'music',
  'must',
  'my',
  'myself',
  'name',
  'nation',
  'national',
  'natural',
  'nature',
  'near',
  'nearly',
  'necessary',
  'need',
  'network',
  'never',
  'new',
  'news',
  'newspaper',
  'next',
  'nice',
  'night',
  'no',
  'none',
  'nor',
  'north',
  'not',
  'note',
  'peace',
  'people',
  'per',
  'perform',
  'performance',
  'perhaps',
  'period',
  'person',
  'personal',
  'phone',
  'physical',
  'pick',
  'picture',
  'piece',
  'place',
  'plan',
  'plant',
  'prevent',
  'price',
  'private',
  'probably',
  'problem',
  'process',
  'produce',
  'product',
  'production',
  'professional',
  'professor',
  'program',
  'project',
  'property',
  'protect',
  'prove',
  'provide',
  'public',
  'pull',
  'purpose',
  'push',
  'put',
  'quality',
  'question',
  'quickly',
  'relate',
  'relationship',
  'religious',
  'remain',
  'remember',
  'remove',
  'report',
  'represent',
  'Republican',
  'require',
  'research',
  'resource',
  'respond',
  'response',
  'responsibility',
  'rest',
  'result',
  'return',
  'reveal',
  'rich',
  'right',
  'rise',
  'risk',
  'road',
  'rock',
  'role',
  'room',
  'rule',
  'run',
  'safe',
  'same',
  'save',
  'say',
  'scene',
  'school',
  'science',
  'scientist',
  'score',
  'sea',
  'season',
  'seat',
  'second',
  'section',
  'security',
  'see',
  'seek',
  'seem',
  'sell',
  'send',
  'six',
  'size',
  'skill',
  'skin',
  'small',
  'smile',
  'so',
  'social',
  'society',
  'sport',
  'spring',
  'staff',
  'stage',
  'stand',
  'standard',
  'star',
  'start',
  'state',
  'statement',
  'station',
  'stay',
  'step',
  'still',
  'stock',
  'stop',
  'store',
  'story',
  'strategy',
  'suggest',
  'summer',
  'support',
  'sure',
  'surface',
  'system',
  'table',
  'take',
  'talk',
  'task',
  'tax',
  'teach',
  'teacher',
  'team',
  'technology',
  'the',
  'their',
  'them',
  'themselves',
  'then',
  'theory',
  'there',
  'these',
  'they',
  'thing',
  'think',
  'third',
  'this',
  'those',
  'though',
  'thought',
  'thousand',
  'threat',
  'trade',
  'traditional',
  'training',
  'travel',
  'treat',
  'treatment',
  'tree',
  'trial',
  'trip',
  'trouble',
  'TRUE',
  'truth',
  'try',
  'turn',
  'TV',
  'two',
  'type',
  'under',
  'understand',
  'unit',
  'until',
  'up',
  'upon',
  'us',
  'use',
  'usually',
  'value',
  'various',
  'very',
  'victim',
  'view',
  'violence',
  'visit',
  'voice',
  'vote',
  'wait',
  'walk',
  'wall',
  'want',
  'war',
  'watch',
  'water',
  'way',
  'we',
  'weapon',
  'wear',
  'week',
  'weight',
  'well',
  'west',
  'western',
  'what',
  'whatever',
  'why',
  'wide',
  'wife',
  'will',
  'win',
  'wind',
  'window',
  'wish',
  'with',
  'within',
  'without',
  'woman',
  'wonder',
  'word',
  'work'
];

// Init word
let randomWord;

// Init score
let score = 0;

// Init time
let time = 10;

// Set difficulty to value in ls or medium
let difficulty =
  localStorage.getItem('difficulty') !== null
    ? localStorage.getItem('difficulty')
    : 'medium';

// Set difficulty select value
difficultySelect.value =
  localStorage.getItem('difficulty') !== null
    ? localStorage.getItem('difficulty')
    : 'medium';

// Focus on text on start
text.focus();

// Start counting down
const timeInterval = setInterval(updateTime, 1000);

// Generate random word from array
function getRandomWord() {
  return words[Math.floor(Math.random() * words.length)];
}

// Add word to DOM
function addWordToDOM() {
  randomWord = getRandomWord();
  word.innerHTML = randomWord;
}

// Update score
function updateScore() {
  score++;
  scoreEl.innerHTML = score;
}

// Update time
function updateTime() {
  time--;
  timeEl.innerHTML = time + 's';

  if (time === 0) {
    clearInterval(timeInterval);
    // end game
    gameOver();
  }
}

// Game over, show end screen
function gameOver() {
  endgameEl.innerHTML = `
    <h1>Time ran out</h1>
    <p>Your final score is ${score}</p>
    <button onclick="location.reload()">Reload</button>
  `;

  endgameEl.style.display = 'flex';
}

addWordToDOM();

// Event listeners

// Typing
text.addEventListener('input', e => {
  const insertedText = e.target.value;

  if (insertedText === randomWord) {
    addWordToDOM();
    updateScore();

    // Clear
    e.target.value = '';

    if (difficulty === 'hard') {
      time += 2;
    } else if (difficulty === 'medium') {
      time += 3;
    } else {
      time += 4;
    }

    updateTime();
  }
});

// Settings btn click
settingsBtn.addEventListener('click', () => settings.classList.toggle('hide'));

// Settings select
settingsForm.addEventListener('change', e => {
  difficulty = e.target.value;
  localStorage.setItem('difficulty', difficulty);
});
